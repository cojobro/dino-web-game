<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trex Runner Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            overflow: hidden;
        }
        canvas {
            display: block;
            margin: 0 auto;
            background-color: #f7f7f7;
            border: 1px solid #ccc;
        }  
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="800" height="300"></canvas>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        let trexImage = new Image();
        trexImage.src = 'https://upload.wikimedia.org/wikipedia/commons/3/3b/Chromium_T-Rex-error-offline.svg';

        let trex = {
            x: 50,
            y: 260,
            width: 40,
            height: 40,
            velocityY: 0,
            gravity: 0.9,
            isJumping: false
        };

        let obstacles = [];
        let frameCount = 0;
        let isGameOver = false;

        document.addEventListener('keydown', function (event) {
            if ((event.key === ' ' || event.key === 'ArrowUp') && !trex.isJumping && !isGameOver) {
                jump();
            }
        });

        document.addEventListener('touchstart', function () {
            if (!trex.isJumping && !isGameOver) {
                jump();
            }
        });

        function jump() {
            trex.isJumping = true;
            trex.velocityY = -15;
        }

        function update() {
            if (isGameOver) return;

            // Apply gravity
            trex.velocityY += trex.gravity;
            trex.y += trex.velocityY;

            if (trex.y >= 260) {
                trex.y = 260;
                trex.isJumping = false;
                trex.velocityY = 0;
            }

            // Spawn obstacles
            if (frameCount % 150 === 0) {
                let obstacle = {
                    x: canvas.width,
                    y: 270,
                    width: 30, // you can randomize width and height here
                    height: 30
                };
                obstacles.push(obstacle);
            }

            // Update obstacles
            obstacles.forEach((obstacle, index) => {
                obstacle.x -= 5;
                if (obstacle.x + obstacle.width < 0) {
                    obstacles.splice(index, 1);
                }

                // Check for collision
                if (
                    trex.x < obstacle.x + obstacle.width &&
                    trex.x + trex.width > obstacle.x &&
                    trex.y < obstacle.y + obstacle.height &&
                    trex.y + trex.height > obstacle.y
                ) {
                    isGameOver = true;
                }
            });
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw Trex
            ctx.drawImage(trexImage, trex.x, trex.y, trex.width, trex.height);

            // Draw obstacles
            ctx.fillStyle = '#555';
            obstacles.forEach(obstacle => {
                ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
            });

            // Draw game over text
            if (isGameOver) {
                ctx.fillStyle = 'red';
                ctx.font = '30px Arial';
                ctx.fillText('Game Over', canvas.width / 2 - 70, canvas.height / 2);
            }
        }

        function gameLoop() {
            let fps = 90;
            let interval = 1000 / fps;
            let lastTime = 0;

            function loop(currentTime) {
            if (currentTime - lastTime >= interval) {
                lastTime = currentTime;
                frameCount++;
                update();
                draw();
                fps+= .05;
                interval = 1000 / fps;
            }
            if (!isGameOver) {
                requestAnimationFrame(loop);
            }
            }

            requestAnimationFrame(loop);
        }

        requestAnimationFrame(gameLoop);
    </script>
</body>
</html>